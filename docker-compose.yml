services:
  # Node.js API ì„œë¹„ìŠ¤
  leafy_api:
    build:
      context: . # ğŸ‘ˆ ê²½ë¡œ ìˆ˜ì •: í˜„ì¬ í´ë”(leafy)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¹Œë“œ
    container_name: leafy_api_container # ğŸ‘ˆ ì´ë¦„ ë³€ê²½: ì¶©ëŒ ë°©ì§€
    env_file:
      - ./.env # ğŸ‘ˆ ê²½ë¡œ ìˆ˜ì •: í˜„ì¬ í´ë”ì˜ .env íŒŒì¼ ì‚¬ìš©
    ports:
      - "3001:3001" # ğŸ‘ˆ í¬íŠ¸ ë…¸ì¶œ: ì§ì ‘ ì ‘ì†ì„ ìœ„í•´ í¬íŠ¸ë¥¼ ì—´ì–´ì¤Œ
    restart: unless-stopped
    # networksëŠ” Docker Composeê°€ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©

  # ğŸ˜ Leafy DB ì„œë¹„ìŠ¤
  leafy_db:
    image: mysql:8.0
    container_name: leafy_db_container # ğŸ‘ˆ ì´ë¦„ ë³€ê²½: ì¶©ëŒ ë°©ì§€
    command: --default-authentication-plugin=mysql_native_password
    restart: always
    env_file:
      - ./.env # ğŸ‘ˆ ê²½ë¡œ ìˆ˜ì •: í˜„ì¬ í´ë”ì˜ .env íŒŒì¼ ì‚¬ìš©
    volumes:
      - leafy_db_volumes:/var/lib/mysql # ğŸ‘ˆ ë³¼ë¥¨ ì´ë¦„ ë³€ê²½: ì¶©ëŒ ë°©ì§€


# DB ë°ì´í„°ë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•œ Docker ë³¼ë¥¨ì„ ì •ì˜í•©ë‹ˆë‹¤.
volumes:
  leafy_db_volumes: