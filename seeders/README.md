# 시드 데이터 관리

이 폴더는 데이터베이스 시드(seed) 파일들을 포함합니다. 시드는 애플리케이션 실행에 필요한 기본 데이터를 데이터베이스에 삽입하는 역할을 합니다.

## 📁 파일 구조

```
seeders/
├── essential-species-data.js    # 필수 데이터 (운영 환경 포함)
├── dev-species-data.js         # 개발용 더미 데이터 (개발 환경만)
└── README.md                   # 이 파일
```

## 🚀 사용법

### 마이그레이션 실행
```bash
npm run migrate          # 마이그레이션 실행 (DB 테이블/컬럼 등 스키마 생성 및 변경 적용)
```

### 시드 데이터 실행
```bash
npm run seed             # 모든 시드 실행 (필수 데이터 + 개발용 더미 데이터 포함)

npm run seed:essential   # 필수 데이터만 삽입 (운영 환경에서도 필요한 데이터: 관리자 계정, 권한 코드 등)

npm run seed:dev         # 개발/테스트 전용 더미 데이터 삽입 (운영에서는 실행 X)
```

## 📋 시드 파일 설명

### 1. `essential-species-data.js`
- **목적**: 운영 환경에서도 필요한 기본 식물 데이터
- **데이터**: 몬스테라, 고무나무, 산세베리아, 스투키, 필로덴드론
- **실행 조건**: 모든 환경에서 실행
- **중복 방지**: `INSERT IGNORE` 사용

### 2. `dev-species-data.js`
- **목적**: 개발/테스트 전용 더미 데이터
- **데이터**: 개발용_테스트_식물_1~5
- **실행 조건**: `NODE_ENV=development`일 때만 실행
- **보안**: 운영 환경에서 자동으로 실행되지 않음

## 🔒 보안 특징

### 중복 방지
- `INSERT IGNORE`를 사용하여 동일한 데이터 중복 삽입 방지
- 안전하게 여러 번 실행 가능

### 환경 분리
- 개발용 시드는 `NODE_ENV` 체크로 운영 환경 반영 방지
- 필수 데이터는 모든 환경에서 안전하게 실행

### 데이터 보호
- 필수 데이터는 운영 환경에서 삭제하지 않음
- 개발용 더미 데이터는 개발 환경에서만 삽입/삭제

## 🛠️ 개발 워크플로우

### 초기 설정
```bash
# 1. 마이그레이션 실행
npm run migrate

# 2. 필수 데이터 시드
npm run seed:essential

# 3. 개발용 더미 데이터 시드
npm run seed:dev
```

### 새로운 시드 추가
1. `npx sequelize-cli seed:generate --name [시드명]`으로 새 시드 생성
2. 시드 파일에 데이터 로직 작성
3. `package.json`에 실행 스크립트 추가 (필요시)
4. `npm run seed`로 테스트

## ⚠️ 주의사항

- **운영 환경**: 개발용 시드(`dev-species-data.js`)는 실행되지 않음
- **데이터 보존**: 필수 데이터는 운영 환경에서 삭제하지 않음
- **중복 실행**: 시드는 안전하게 여러 번 실행 가능
- **순서**: 마이그레이션 실행 후 시드 실행 권장

## 📊 실행 결과

### 필수 데이터 (5개)
- 몬스테라, 고무나무, 산세베리아, 스투키, 필로덴드론

### 개발용 데이터 (5개, 개발 환경만)
- 개발용_테스트_식물_1~5

**총 10개의 species 데이터**가 개발 환경에서 삽입됩니다.
